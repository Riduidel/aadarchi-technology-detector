<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
    <entry key="get_packages_downloads_by_month"><![CDATA[
#standardSQL
SELECT
  file.project,
  COUNT(*) AS number_of_downloads,
  DATE_TRUNC(DATE(timestamp), MONTH) AS `month`
FROM `bigquery-public-data.pypi.file_downloads`
WHERE
  file.project in UNNEST(@packagesList)
  -- Only query the last 6 months of history
  AND DATE(timestamp)
    BETWEEN DATE_TRUNC(@startDate, MONTH)
    AND DATE_TRUNC(CURRENT_DATE(), MONTH)
GROUP BY file.project, `month`
ORDER BY `month` DESC
]]></entry>

</properties>